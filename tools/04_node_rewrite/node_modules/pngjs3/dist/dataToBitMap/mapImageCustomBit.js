'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = mapImageCustomBit;

var _pixelBppMap = require('./pixelBppMap');

var _pixelBppMap2 = _interopRequireDefault(_pixelBppMap);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function mapImageCustomBit(_ref) {
  var image = _ref.image,
      pxData = _ref.pxData,
      getPxPos = _ref.getPxPos,
      bpp = _ref.bpp,
      bits = _ref.bits,
      maxBit = _ref.maxBit;
  var imageWidth = image.width,
      imageHeight = image.height;

  var imagePass = image.index;
  for (var y = 0; y < imageHeight; y++) {
    for (var x = 0; x < imageWidth; x++) {
      var pixelData = bits.get(bpp);
      var pxPos = getPxPos(x, y, imagePass);

      for (var i = 0; i < 4; i++) {
        var idx = _pixelBppMap2.default[bpp][i];
        pxData[pxPos + i] = idx !== 0xff ? pixelData[idx] : maxBit;
      }
    }
    bits.resetAfterLine();
  }
}